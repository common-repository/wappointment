(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"2Wx3":function(t,e,a){"use strict";a.r(e);var n=a("rqdy"),r={extends:a("l2W7").a,components:{CalendarsAddEdit:n.a},data:function(){return{viewName:"regav",currentStep:1,totalStep:3,calendarsUsed:[]}},methods:{saveAndNextStep:function(){this.$refs.caledit.saveCalendar()}}},s=a("KHd+"),i=Object(s.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hasTopPane"},[a("topPane",{attrs:{step:t.currentStep,total:t.totalStep,nextEnabled:!0},on:{next:t.saveAndNextStep,back:t.prevStep}}),t._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"col-12"},[a("div",[a("div",{staticClass:"d-flex"},[a("h1",[t._v(t._s(t.get_i18n("wizard_2_title","wizard")))])]),t._v(" "),a("p",{staticClass:"h6 text-muted"},[t._v(t._s(t.get_i18n("wizard_2_subtitle","wizard")))]),t._v(" "),a("hr")]),t._v(" "),t.dataLoaded?a("CalendarsAddEdit",{ref:"caledit",attrs:{calendar:t.viewData.calendar,timezones_list:t.viewData.timezones_list,calendarsUsed:t.calendarsUsed,staffs:t.viewData.staffs},on:{saved:t.nextStep}}):t._e()],1)])],1)},[],!1,null,null,null);e.default=i.exports},"3jVL":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.welcome-wrapper{\n  width: 480px;\n  background: #f1ebff;\n  border-radius: .25rem;\n  padding: 1rem;\n}\n",""])},"6ANM":function(t,e,a){var n=a("S/cw");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("SZ7m").default)("f224e37e",n,!0,{})},Q25h:function(t,e,a){"use strict";a.r(e);var n=a("WISJ");var r,s,i={extends:a("XfSa").a,data:function(){return{service:null,installationErrors:[],mainInstallationError:"",suggest_ugly_links:!1}},components:{Notifications:function(){return a.e(32).then(a.bind(null,"M4+M"))}},created:function(){this.service=this.$vueService(new n.a)},methods:{wizardStep1Request:(r=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.service.call("wizard",{step:"1"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}),s=function(){var t=r.apply(this,arguments);return new Promise(function(e,a){return function n(r,s){try{var i=t[r](s),c=i.value}catch(t){return void a(t)}if(!i.done)return Promise.resolve(c).then(function(t){n("next",t)},function(t){n("throw",t)});e(c)}("next")})},function(){return s.apply(this,arguments)}),wizardStep1:function(){this.installationErrors=[],this.request(this.wizardStep1Request,void 0,void 0,!1,this.redirectWizardStep1,this.failedRequest)},failedRequest:function(t){if(404===t.response.status&&(this.suggest_ugly_links=!0),void 0!==t.response){for(var e in t.response.data.data.errors.validations)if(t.response.data.data.errors.validations.hasOwnProperty(e))for(var a=t.response.data.data.errors.validations[e],n=0;n<a.length;n++){var r=a[n];this.installationErrors.push(r)}this.mainInstallationError=t.response.data.message}this.serviceError(t)},redirectLater:function(){this.$router.push({name:"wappointment_calendar"})},redirectWizardStep1:function(){this.$router.push({name:"wizard2"})}},computed:{getWelcomeImg:function(){return window.apiWappointment.apiSite+"/plugin/"+window.apiWappointment.version+"/welcome.gif"}}},c=(a("Slf1"),a("KHd+")),l=Object(c.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container m-4"},[a("h1",[t._v(t._s(t.get_i18n("wizard_1_title","wizard")))]),t._v(" "),a("div",{staticClass:"d-flex align-items-center welcome-wrapper"},[a("div",{staticClass:"mr-4"},[a("h3",[t._v(t._s(t.get_i18n("wizard_1_lets","wizard")))]),t._v(" "),t.suggest_ugly_links?a("div",{staticClass:"bg-danger p-4 rounded"},[a("div",{staticClass:"h5 text-white"},[t._v('Your site has permalinks "ON" but your server is not properly configured to handle them. ')]),t._v(" "),t._m(0),t._v(" "),t._m(1)]):a("div",[a("p",{staticClass:"mt-4"},[a("button",{staticClass:"btn btn-primary btn-lg btn-block",on:{click:t.wizardStep1}},[t._v(t._s(t.get_i18n("wizard_1_start","wizard")))])]),t._v(" "),a("div",{staticClass:"small"},[a("div",[t._v(t._s(t.get_i18n("wizard_1_ask_help1","wizard")))]),t._v(" "),a("div",[t._v(t._s(t.get_i18n("wizard_1_ask_help2","wizard"))),a("a",{attrs:{href:"https://wappointment.com/support",target:"_blank"}},[t._v("https://wappointment.com/support")])])])])]),t._v(" "),a("img",{staticClass:"img-fluid",attrs:{src:t.getWelcomeImg,alt:t.get_i18n("wizard_1_title","wizard")}})]),t._v(" "),t.installationErrors.length>0?a("Notifications",{attrs:{messages:t.installationErrors,title:t.mainInstallationError}}):t._e()],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h6 text-white"},[this._v("You should configure either your server or switch to ugly permalinks. "),e("a",{attrs:{href:"https://wordpress.org/support/article/using-permalinks/",target:"_blank"}},[this._v("Read about permalinks")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"d-flex p-2"},[e("a",{staticClass:"btn btn-secondary mr-2",attrs:{href:"options-permalink.php",target:"_blank"}},[this._v("Change permalinks configuration")]),this._v(" "),e("a",{staticClass:"btn btn-primary",attrs:{href:"admin.php?page=wappointment_calendar&wappo_ugly_permalinks=1#/wizard1"}},[this._v("Continue With Wappointment Anyway")])])}],!1,null,null,null);e.default=l.exports},"S/cw":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.bullet-title{\n    color: #777;\n    border-bottom: 1px solid #c2c1cc;\n    font-weight: bold;\n}\n.bullet-wap{\n    border: 1px solid var(--primary);\n    padding: .35rem;\n    border-radius: 1.2rem;\n    height: 2rem;\n    width: 2rem;\n    display: inline-block;\n    text-align: center;\n    font-size: 1rem;\n    color: var(--primary);\n    margin-right: .5rem;\n    background-color: #fff;\n}\n.changename .label-wrapper{\n    margin-bottom: 0 !important;\n}\n.account-selector{\n    width: 380px;\n}\n.cal-edit-margin{\n    margin-left: 48px;\n}\n.mr-6{\n    margin-right: 3rem !important;\n}\n",""])},Slf1:function(t,e,a){"use strict";var n=a("kgCb");a.n(n).a},WJvZ:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,"\n.progress {\n    width:40%;\n    height: 2.2rem;\n    margin-right: 2rem;\n    margin-left: 1rem;\n}\n.bg-info {\n    background-color: #d1d1d1 !important;\n    color: #4d4949;\n    font-size: .9rem;\n    font-weight: bold;\n    transition: all 0.3s ease-in;\n}\n@media (max-width: 769px) {\n.progress {\n        height: 1.6rem;\n}\n}\n\n",""])},aiNY:function(t,e,a){"use strict";var n=a("6ANM");a.n(n).a},kgCb:function(t,e,a){var n=a("3jVL");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("SZ7m").default)("24e5d37e",n,!0,{})},l2W7:function(t,e,a){"use strict";var n=a("XfSa"),r={components:{ContactButton:a("xsJs").a},props:{step:0,total:0,nextEnabled:{type:Boolean,default:!1}},data:function(){return{pstep:0,nextEn:!1}},mounted:function(){this.pstep=window.prevStep,this.nextEn=!0===this.nextEnabled,setTimeout(this.delayMounted,50)},methods:{toggleNext:function(t){this.nextEn=t},delayMounted:function(){this.pstep=this.step},emitBack:function(){this.$emit("back")},emitNext:function(){!1!==this.nextEn&&this.$emit("next")}}},s=(a("lpFo"),a("KHd+")),i=Object(s.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("StickyBar",[a("div",{staticClass:"d-block d-md-none"},[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"progress align-self-center"},[a("div",{staticClass:"progress-bar progress-bar-striped bg-info",style:"width:"+t.pstep/t.total*100+"%",attrs:{role:"progressbar"}},[t._v("\n                    "+t._s(t.get_i18n("wizard_wizard","wizard"))+" "+t._s(t.step)+" / "+t._s(t.total)+"\n                ")])]),t._v(" "),a("div",{staticClass:"buttons align-self-center"},[a("button",{staticClass:"btn btn-secondary btn-xs",on:{click:t.emitBack}},[t._v(t._s(t.get_i18n("wizard_back","wizard")))]),t._v(" "),a("button",{staticClass:"btn btn-primary btn-xs",class:{disabled:!t.nextEn},attrs:{disabled:!t.nextEn},on:{click:t.emitNext}},[t._v(t._s(t.get_i18n("wizard_next","wizard")))])])])]),t._v(" "),a("div",{staticClass:"d-none d-md-block"},[a("div",{staticClass:" d-flex flex-wrap"},[a("div",{staticClass:"progress align-self-center"},[a("div",{staticClass:"progress-bar progress-bar-striped bg-info",style:"width:"+t.pstep/t.total*100+"%",attrs:{role:"progressbar"}},[t._v("\n                    "+t._s(t.get_i18n("wizard_wizard","wizard"))+" "+t._s(t.step)+" / "+t._s(t.total)+"\n                ")])]),t._v(" "),a("div",{staticClass:"buttons align-self-center"},[a("button",{staticClass:"btn btn-secondary btn-xl",on:{click:t.emitBack}},[t._v(t._s(t.get_i18n("wizard_back","wizard")))]),t._v(" "),a("button",{staticClass:"btn btn-primary btn-xl",class:{disabled:!t.nextEn},attrs:{disabled:!t.nextEn},on:{click:t.emitNext}},[t._v(t._s(t.get_i18n("wizard_next","wizard")))])]),t._v(" "),a("ContactButton",{attrs:{subject:"Installation Wizard",buttonClass:"btn btn-secondary btn-sm",buttonLabel:"Help"}})],1)])])},[],!1,null,null,null).exports;function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(r,s){try{var i=e[r](s),c=i.value}catch(t){return void a(t)}if(!i.done)return Promise.resolve(c).then(function(t){n("next",t)},function(t){n("throw",t)});t(c)}("next")})}}var l,o,d={extends:n.a,components:{topPane:i},methods:{setPrevStep:function(){window.prevStep=this.currentStep},nextStep:function(){this.setPrevStep(),this.request(this.nextStepRequest,void 0,void 0,!1,this.redirectNext)},nextStepRequest:(o=c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.service.call("wizard",{step:this.currentStep+1});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})),function(){return o.apply(this,arguments)}),redirectNext:function(){this.$router.push({name:"wizard"+(this.currentStep+2)})},prevStep:function(){this.setPrevStep(),this.request(this.prevStepRequest,void 0,void 0,!1,this.redirectPrev)},prevStepRequest:(l=c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.service.call("wizard",{step:this.currentStep-1});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})),function(){return l.apply(this,arguments)}),redirectPrev:function(){this.$router.push({name:"wizard"+this.currentStep})}}},u=Object(s.a)(d,void 0,void 0,!1,null,null,null);e.a=u.exports},lpFo:function(t,e,a){"use strict";var n=a("pxgz");a.n(n).a},pxgz:function(t,e,a){var n=a("WJvZ");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("SZ7m").default)("34a160b8",n,!0,{})},rqdy:function(t,e,a){"use strict";var n=a("LB0/"),r=a("vbJd"),s=a("l9VS"),i=a("XfSa"),c=a("VyXW"),l=a("FYyN"),o=a("c+oO"),d=a("A5Wa");function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(r,s){try{var i=e[r](s),c=i.value}catch(t){return void a(t)}if(!i.done)return Promise.resolve(c).then(function(t){n("next",t)},function(t){n("throw",t)});t(c)}("next")})}}var p,v,f={extends:i.a,components:window.wappointmentExtends.filter("RegavComponents",{RegularAvailability:n.a,TimeZones:s.a,StaffSelector:r.a,StaffPicture:c.a},{RequestMaker:l.a}),props:{calendar:{type:Object,default:!1},timezones_list:{type:Object},staffs:{type:Array},services:{type:Array},calendarsUsed:{type:Array}},data:function(){return{calendarSelected:!1,requireSave:!1,hasWpuid:!1}},created:function(){this.calendarSelected=Object.assign({},this.calendar),void 0!==this.calendarSelected.wp_uid&&this.calendarSelected.wp_uid>0&&(this.hasWpuid=this.calendarSelected.wp_uid),this.mainService=this.$vueService(new o.a),""==this.calendarSelected.timezone&&(this.calendarSelected.timezone=d.a.tz.guess())},watch:{calendarSelected:{handler:function(t,e){!1!==e&&(this.requireSave=!0,this.hasWpuid=t.wp_uid)},deep:!0}},computed:{onlyUnusedStaff:function(){var t=this.calendarSelected.wp_uid,e=this.calendarsUsed.filter(function(e){return e!=t});return[].concat(this.staffs).map(function(t){return-1===e.indexOf(t.ID)?t.used=0:void 0===t.used?t.used=1:t.used++,t})},getRegav:function(){var t=Object.assign({},this.calendar.regav);return void 0===this.calendar.regav.precise&&(t=this.convertRegavToPrecise(t)),t},staffSelected:function(){return!1!==this.calendarSelected&&this.hasWpuid>0}},methods:{convertRegavToPrecise:function(t){for(var e in this.calendar.regav)if(this.calendar.regav.hasOwnProperty(e))for(var a=0;a<this.calendar.regav[e].length;a++){var n=this.calendar.regav[e][a];t[e][a]=[60*n[0],60*n[1]]}return t},updatedRA:function(t){t.precise=!0,this.calendarSelected.regav=t},changedABD:function(t){this.calendarSelected.avb=t},saveCalendar:function(){this.request(this.saveCalendarRequest,this.calendarSelected,void 0,!1,this.calendarSaved)},saveCalendarRequest:(v=u(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.mainService.call("save",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})),function(t){return v.apply(this,arguments)}),calendarSaved:function(t){this.serviceSuccess(t),this.$emit("saved",t)},changedPicture:function(t){t>0?this.request(this.getAvatarRequest,{id:t},void 0,!1,this.avatarLoaded):(this.calendarSelected.avatar="",this.calendarSelected.avatar_id="")},avatarLoaded:function(t){this.calendarSelected.avatar_id=t.data.id,this.calendarSelected.avatar=t.data.avatar},getAvatarRequest:(p=u(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.mainService.call("getAvatar",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)})),function(t){return p.apply(this,arguments)}),updateTimezone:function(t){this.calendarSelected.timezone=t},updateStaffName:function(t){this.calendarSelected.name=t},updateStaff:function(t){this.calendarSelected.wp_uid!=t.ID&&(this.calendarSelected.wp_uid=t.ID,this.calendarSelected.gravatar=t.gravatar,this.calendarSelected.name=""!==t.display_name?t.display_name:"Jane Doe")}}},h=(a("aiNY"),a("KHd+")),m=Object(h.a)(f,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",[a("p",{staticClass:"h6 text-muted"},[a("span",{staticClass:"bullet-wap"},[t._v("1")]),t._v(" "),a("span",{staticClass:"bullet-title"},[t._v(t._s(t.get_i18n("regav_step1","common")))])]),t._v(" "),a("small",{staticClass:"text-muted mr-6"},[t._v(t._s(t.get_i18n("regav_select_an","common")))]),t._v(" "),a("div",{staticClass:"d-flex align-items-top mb-2"},[""!=t.calendarSelected.name?a("StaffPicture",{attrs:{src:t.calendarSelected.avatar,gravatar:t.calendarSelected.gravatar},on:{changed:t.changedPicture}}):t._e(),t._v(" "),""!=t.calendarSelected.name?a("div",{staticClass:"mr-2 changename"},[a("InputPh",{attrs:{ph:t.get_i18n("name","common")},on:{updatedValue:t.updateStaffName},model:{value:t.calendarSelected.name,callback:function(e){t.$set(t.calendarSelected,"name",e)},expression:"calendarSelected.name"}})],1):t._e(),t._v(" "),a("div",{staticClass:"account-selector"},[a("StaffSelector",{attrs:{staffs:t.onlyUnusedStaff,activeStaffId:t.calendarSelected.wp_uid},on:{updateStaff:t.updateStaff}})],1)],1)]),t._v(" "),t.staffSelected?a("div",[a("p",{staticClass:"h6 text-muted"},[a("span",{staticClass:"bullet-wap"},[t._v("2")]),t._v(" "),a("span",{staticClass:"bullet-title"},[t._v(" "+t._s(t.get_i18n("regav_step2","common")))])]),t._v(" "),a("div",{staticClass:"cal-edit-margin"},[a("TimeZones",{attrs:{classW:"d-flex",timezones:t.timezones_list,defaultTimezone:t.calendarSelected.timezone,typeClass:"small text-muted container-values d-flex justify-content-between align-items-center form-control"},on:{updateTimezone:t.updateTimezone}})],1),t._v(" "),a("hr")]):t._e(),t._v(" "),t.staffSelected?a("div",[a("p",{staticClass:"h6 text-muted"},[a("span",{staticClass:"bullet-wap"},[t._v("3")]),t._v(" "),a("span",{staticClass:"bullet-title"},[t._v(" "+t._s(t.get_i18n("regav_step3","common")))])]),t._v(" "),a("div",{staticClass:"cal-edit-margin"},[a("RegularAvailability",{attrs:{initValue:t.getRegav,viewData:t.calendarSelected,services:t.services},on:{updatedDays:t.updatedRA,changedABD:t.changedABD}})],1)]):t._e()]),t._v(" "),t.requireSave?a("div",{staticClass:"save-floating-button"},[a("button",{staticClass:"btn btn-primary",on:{click:t.saveCalendar}},[t._v(t._s(t.get_i18n("regav_save","common")))])]):t._e()])},[],!1,null,null,null);e.a=m.exports}}]);
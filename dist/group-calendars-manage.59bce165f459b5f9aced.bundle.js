(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+Jhk":function(e,t,n){"use strict";var a=n("PwNG");n.n(a).a},"0LHV":function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.commands-div{\n    min-width:280px;\n}\n",""])},"4G2+":function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.calendar-pic{\n    position: relative;\n}\n.calendar-pic .status{\n    display: block;\n    width: .7em;\n    height: .7em;\n    border-radius: 50%;\n    position: absolute;\n    top: 30px;\n    left: 30px;\n}\n.calendar-pic.active .status{\n    background-color:var(--primary);\n}\n.calendar-pic.inactive .status{\n    background-color:#ccc;\n}\n.calendar-pic.inactive img{\n    filter: grayscale(1);\n    opacity:.4;\n}\n.location {\n    margin: .2rem;\n    color: #717171;\n}\n.cal-icon{\n    position: relative;\n}\n.cal-icon .cal-desc{\n    display: none !important;\n}\n.cal-icon:hover .cal-desc{\n    display: flex !important;\n    position: absolute;\n    right: 0px;\n    z-index: 9;\n    top: 16px;\n    word-break:break-all;\n}\n.cal-icon:hover > .dashicons {\n    color: var(--primary);\n}\n.cell-services{\n    max-width: 200px;\n}\n.cell-services .d-flex{\n    max-height: 44px;\n    overflow: hidden;\n    margin-bottom: .4em;\n}\n.cell-services .d-flex:hover{\n    max-height: none !important;\n}\n.headerToggle a{\n    display: none;\n}\n.headerToggle:hover a{\n    display: inline;\n}\n",""])},"4GyF":function(e,t,n){var a=n("wvDB");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("fba8d3e6",a,!0,{})},"4HCW":function(e,t,n){"use strict";var a=n("4GyF");n.n(a).a},"6ANM":function(e,t,n){var a=n("S/cw");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("f224e37e",a,!0,{})},"6uyd":function(e,t,n){"use strict";t.a=function(){return navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en-US"}},AU4x:function(e,t,n){"use strict";n.r(t);var a=n("Mola"),s=n("RnKe"),i=n("c+oO"),r=n("rqdy"),o=n("LB0/"),c=n("vbJd"),l=n("l9VS"),d=n("XfSa"),u=n("VyXW"),v=n("FYyN"),f={extends:d.a,components:window.wappointmentExtends.filter("RegavComponents",{RegularAvailability:o.a,TimeZones:l.a,StaffSelector:c.a,StaffPicture:u.a},{RequestMaker:v.a}),props:{calendar:{type:Object,default:!1},timezones_list:{type:Object},staffs:{type:Array},services:{type:Array}},computed:{getRegav:function(){var e=Object.assign({},this.calendar.regav);return void 0===this.calendar.regav.precise&&(e=this.convertRegavToPrecise(e)),e}},methods:{convertRegavToPrecise:function(e){for(var t in this.calendar.regav)if(this.calendar.regav.hasOwnProperty(t))for(var n=0;n<this.calendar.regav[t].length;n++){var a=this.calendar.regav[t][n];e[t][n]=[60*a[0],60*a[1]]}return e},updatedRA:function(e){e.precise=!0,this.settingStaffSave("regav",e)},changedABD:function(e){this.settingStaffSave("availaible_booking_days",e)},changed:function(e){},updateTimezone:function(e){this.settingStaffSave("timezone",e)},updateStaffName:function(e){this.reload=!0,this.settingStaffSave("display_name",e)},updateStaff:function(e){this.reload=!0,this.settingSave("activeStaffId",e)}}},h=(n("+Jhk"),n("KHd+")),p=Object(h.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("p",{staticClass:"h6 text-muted"},[n("span",{staticClass:"bullet-wap"},[e._v("1")]),e._v(" "),e.staffs.length>1?n("span",{staticClass:"bullet-title"},[e._v(" Set who provides the appointments ")]):n("span",{staticClass:"bullet-title"},[e._v(" Modify your picture ")])]),e._v(" "),n("div",{staticClass:"d-flex align-items-top mb-2"},[n("StaffPicture",{attrs:{src:e.calendar.avatar,gravatar:e.calendar.gravatar},on:{changed:e.changed}}),e._v(" "),n("div",{staticClass:"mr-2 changename"},[n("InputPh",{attrs:{ph:"Change name"},on:{updatedValue:e.updateStaffName},model:{value:e.calendar.name,callback:function(t){e.$set(e.calendar,"name",t)},expression:"calendar.name"}})],1),e._v(" "),n("div",{staticClass:"account-selector"},[n("StaffSelector",{attrs:{staffs:e.staffs,activeStaffId:e.calendar.id},on:{updateStaff:e.updateStaff}}),e._v(" "),e._m(0)],1)],1),e._v(" "),e._m(1),e._v(" "),e.calendar?n("TimeZones",{attrs:{classW:"d-flex",timezones:e.timezones_list,defaultTimezone:e.calendar.timezone,typeClass:"small text-muted container-values d-flex justify-content-between align-items-center form-control"},on:{updateTimezone:e.updateTimezone}}):e._e(),e._v(" "),n("hr")],1),e._v(" "),e._m(2),e._v(" "),n("RegularAvailability",{attrs:{initValue:e.getRegav,viewData:e.calendar,services:e.services},on:{updatedDays:e.updatedRA,changedABD:e.changedABD}})],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("small",{staticClass:"text-muted"},[this._v(" You must select a WordPress account; you can "),t("a",{attrs:{href:"users.php",target:"_blank"}},[this._v("add a new one here")]),this._v(" (a contributor role is required at least)")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"h6 text-muted"},[t("span",{staticClass:"bullet-wap"},[this._v("2")]),this._v(" "),t("span",{staticClass:"bullet-title"},[this._v(" Set your timezone")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"h6 text-muted"},[t("span",{staticClass:"bullet-wap"},[this._v("3")]),this._v(" "),t("span",{staticClass:"bullet-title"},[this._v(" Set your standard weekly schedule")])])}],!1,null,null,null).exports,m={computed:{resourcesUrl:function(){return window.apiWappointment.resourcesUrl+"images/"}},methods:{connectionImage:function(e){switch(e){case"zoom":return this.resourcesUrl+"zoom.png";case"google":return this.resourcesUrl+"google-calendar.png";case"googlemeet":return this.resourcesUrl+"google-meet.png"}},connectionDescription:function(e){switch(e){case"zoom":return"Automatically creates Zoom meeting for your new Video Meetings and save the meeting link in Wappointment";case"google":return"Automatically save new appointments to a secondary calendar in your Google Calendar account";case"googlemeet":return"Automatically generates Google Meet meetings for your new Video Meetings and save the meeting link in Wappointment"}},connectionLabel:function(e){switch(e){case"zoom":return"Zoom";case"google":return"Google Calendar";case"googlemeet":return"Google Meet"}}}},_=Object(h.a)(m,void 0,void 0,!1,null,null,null).exports,g={extends:d.a,mixins:[_],props:{connections:{type:Array,default:[]},showLabel:{type:Boolean,value:!1},vertical:{type:Boolean,value:!1}},data:function(){return{availableConnections:["zoom","google","googlemeet"]}},computed:{orderedConnections:function(){return this.availableConnections.sort(this.sortConnections)}},methods:{boolToInt:function(e){return e?1:0},sortConnections:function(e,t){return this.boolToInt(this.isConnected(t))-this.boolToInt(this.isConnected(e))},isConnected:function(e){return this.connections.find(function(t){return-1!==e.indexOf(t)})}}},b=(n("gpnA"),Object(h.a)(g,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.vertical?"wservices-list wintegrations text-muted":"d-flex wintegrations"]},e._l(e.orderedConnections,function(t){return n("div",{staticClass:"d-flex mr-2 slot tt-lg align-items-center",class:[e.isConnected(t)?"tt-success":"tt-disabled"],attrs:{"data-tt":e.connectionDescription(t)}},[n("img",{attrs:{src:e.connectionImage(t),alt:e.connectionLabel(t)}}),e._v(" "),e.showLabel?n("span",{staticClass:"ml-2"},[e._v(e._s(e.connectionLabel(t)))]):e._e()])}),0)},[],!1,null,null,null).exports),w={mixins:[n("G5JO").a],methods:{getPropertyCal:function(e,t,n){return void 0!==n.calendar_logs[t]&&void 0!==n.calendar_logs[t][e]&&n.calendar_logs[t][e]},lastChecked:function(e,t){return this.unixToDateTime(this.getPropertyCal("last-checked",e,t),t.timezone)},lastChanged:function(e,t){return this.unixToDateTime(this.getPropertyCal("last-parsed",e,t),t.timezone)},calDuration:function(e,t){return this.getPropertyCal("last-duration",e,t)+"s"},calInserted:function(e,t){return this.getPropertyCal("last_parser",e).inserted},calIgnored:function(e){return this.calDetected-this.calInserted},calDeleted:function(e,t){return this.getPropertyCal("last_parser",e,t).deleted},calDetected:function(e,t){return this.getPropertyCal("last_parser",e,t).detected},importCalendarSuccess:function(e){this.$WapModal().notifySuccess(e.data.message),this.hideAndRefresh()},savedSync:function(e){this.hideAndRefresh(),this.$WapModal().notifySuccess(e.data.message)},hideAndRefresh:function(){this.hideModal(),this.loadElements()}}},C=(n("IvBe"),Object(h.a)(w,void 0,void 0,!1,null,null,null).exports),y=n("lpR3"),x={extends:d.a,components:{Connections:b},mixins:[_],props:{calendar:{type:Object},canEdit:{type:Boolean,default:!0}},methods:{convertHours:function(e){return this.convertHour(e[0])+" - "+this.convertHour(e[1])},convertHour:function(e){var t=e%60;return Math.floor(e/60)+"h"+(t>0?t:"")},getDayLabel:function(e){return e},getUsedDays:function(e){return Object.keys(e).filter(function(e,t){return"precise"!==t&&e.length>0}).reduce(function(t,n){return e[n].length>0&&(t[n]=e[n]),t},{})}}},S=(n("Rhu5"),Object(h.a)(x,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"d-flex"},e._l(e.getUsedDays(e.calendar.regav),function(t,a){return n("div",{staticClass:"dayLabel mr-2"},[n("div",{attrs:{"data-tt":e.getDayLabel(a)}},[e._v(e._s(e.getDayLabel(a)[0]))]),e._v(" "),n("div",{staticClass:"d-flex"},e._l(t,function(t,a){return n("div",{staticClass:"available-slot mr-1 tt-below",class:{"mx-1":a<1},attrs:{"data-tt":e.convertHours(t)}})}),0)])}),0),e._v(" "),e.canEdit?n("a",{staticClass:"small",attrs:{href:"javascript:;"},on:{click:function(t){e.$emit("edit",e.calendar)}}},[e._v(e._s(e.get_i18n("edit","common")))]):e._e()])},[],!1,null,null,null).exports),k=n("SyxS"),A=n("AsP0"),R=n("ZfG2"),P={props:{user:{type:Object},nosave:{type:Boolean,default:!1}}},D=Object(h.a)(P,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[n("h3",{staticClass:"d-flex align-items-center justify-content-center"},[n("img",{staticClass:"img-fluid wrounded",attrs:{src:e.user.avatar||e.user.gravatar,width:"40",alt:e.user.name}}),e._v(" "),n("div",{staticClass:"ml-2"},[e._v(e._s(e.user.name))])]),e._v(" "),e._t("default"),e._v(" "),!1===e.nosave?n("button",{staticClass:"btn btn-primary",on:{click:function(t){e.$emit("save")}}},[e._v(e._s(e.get_i18n("save","common")))]):e._e()],2)},[],!1,null,null,null).exports,E={props:["current","services","user"],components:{StaffModalWrapper:D,SearchDropdown:R.a},data:function(){return{value:[]}},created:function(){this.value=[].concat(this.current)}},O=Object(h.a)(E,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("StaffModalWrapper",{attrs:{user:e.user,nosave:""}},[n("SearchDropdown",{attrs:{hasMulti:"",ph:"Pick services provided by staff",elements:e.services,idKey:"id",labelSearchKey:"name"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),e._v(" "),n("button",{staticClass:"btn btn-primary mt-2",on:{click:function(t){e.$emit("save",e.value)}}},[e._v(e._s(e.get_i18n("save","common")))])],1)},[],!1,null,null,null).exports,T={components:{StaffModalWrapper:D},props:["permissions","user"],data:function(){return{new_permissions:[]}},created:function(){this.initPermissions()},computed:{user_permissions:function(){return this.user.permissions}},methods:{save:function(){this.$emit("save",this.new_permissions)},initPermissions:function(){for(var e in this.permissions)this.lookForPermission(e,this.permissions)},lookForPermission:function(e,t){t.hasOwnProperty(e)&&-1!==this.user_permissions.indexOf(e)&&(this.new_permissions.push(e),this.lookForSubCaps(t[e]))},lookForSubCaps:function(e){if(void 0!==e.sub_caps)for(var t in e.sub_caps)this.lookForPermission(t,e.sub_caps)}}},I=Object(h.a)(T,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("StaffModalWrapper",{attrs:{user:e.user},on:{save:e.save}},[n("div",{staticClass:"p-2 rounded bg-secondary"},e._l(e.permissions,function(t,a){return n("div",[n("div",{staticClass:"d-flex"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.new_permissions,expression:"new_permissions"}],attrs:{type:"checkbox"},domProps:{value:a,checked:Array.isArray(e.new_permissions)?e._i(e.new_permissions,a)>-1:e.new_permissions},on:{change:function(t){var n=e.new_permissions,s=t.target,i=!!s.checked;if(Array.isArray(n)){var r=a,o=e._i(n,r);s.checked?o<0&&(e.new_permissions=n.concat([r])):o>-1&&(e.new_permissions=n.slice(0,o).concat(n.slice(o+1)))}else e.new_permissions=i}}}),e._v("\n                    "+e._s(t.name)+"\n                ")])]),e._v(" "),-1!==e.new_permissions.indexOf(a)?n("div",{staticClass:"ml-4"},e._l(t.sub_caps,function(t,a){return n("div",{staticClass:"d-flex"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.new_permissions,expression:"new_permissions"}],attrs:{type:"checkbox"},domProps:{value:a,checked:Array.isArray(e.new_permissions)?e._i(e.new_permissions,a)>-1:e.new_permissions},on:{change:function(t){var n=e.new_permissions,s=t.target,i=!!s.checked;if(Array.isArray(n)){var r=a,o=e._i(n,r);s.checked?o<0&&(e.new_permissions=n.concat([r])):o>-1&&(e.new_permissions=n.slice(0,o).concat(n.slice(o+1)))}else e.new_permissions=i}}}),e._v("\n                        "+e._s(t)+"\n                    ")])])}),0):e._e()])}),0)])},[],!1,null,null,null).exports;function q(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(s,i){try{var r=t[s](i),o=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}("next")})}}var M,F,L,j={extends:d.a,components:{Connections:b},mixins:[_],props:{calendar:{type:Object}},data:function(){return{account_key:""}},computed:{createAccount:function(){return window.apiWappointment.apiSite+"/register?site="+encodeURIComponent(apiWappointment.root)+"&version="+apiWappointment.version},addMoreService:function(){return window.apiWappointment.apiSite+"/client/account"}},methods:{refresh:function(){var e={account_key:this.account_key};void 0!==this.calendar.wp_uid&&(e.id=this.calendar.id),this.request(this.refreshWappoRequest,e,null,!1,this.successRefreshed)},refreshWappoRequest:(L=q(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.call("refreshdotcom",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return L.apply(this,arguments)}),successRefreshed:function(e){this.is_dotcom_connected=e.data.data.dotcom,this.$WapModal().notifySuccess(e.data.message,1),this.$emit("reload")},successConnected:function(e){this.is_dotcom_connected=e.data.data.dotcom,this.$WapModal().notifySuccess(e.data.message,1),this.$emit("reload")},connectToWappo:function(){var e={account_key:this.account_key};void 0!==this.calendar.wp_uid&&(e.id=this.calendar.id),this.request(this.connectToWappoRequest,e,null,!1,this.successConnected)},connectToWappoRequest:(F=q(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.call("connectdotcom",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return F.apply(this,arguments)}),disconnectWappo:function(){var e={};void 0!==this.calendar.wp_uid&&(e.id=this.calendar.id),this.request(this.disconnectToWappoRequest,e,null,!1,this.successDisconnected)},disconnectToWappoRequest:(M=q(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.call("disconnectdotcom",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return M.apply(this,arguments)}),successDisconnected:function(e){this.is_dotcom_connected=!1,this.$WapModal().notifySuccess(e.data.message,1),this.$emit("reload")}}},W=(n("OEWU"),Object(h.a)(j,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper-dotcom p-4"},[n("div",{staticClass:"d-flex justify-content-center align-items-center flex-wrap flex-xl-nowrap"},[n("div",[n("h3",{staticClass:"d-flex align-items-center"},[n("div",[n("img",{staticClass:"img-fluid wrounded",attrs:{src:e.calendar.avatar,alt:e.calendar.name,width:"40"}})]),e._v(" "),n("div",{staticClass:"ml-2"},[n("div",[e._v(e._s(e.calendar.name))])])]),e._v(" "),e.calendar.connected?n("div",[n("div",[e._v("Connected to wappointment.com with: ")]),e._v(" "),n("div",[n("strong",[e._v(e._s(e.calendar.connected.account_key))])]),e._v(" "),n("a",{staticClass:"small",attrs:{href:"javascript:;","data-tt":"Refresh service status"},on:{click:e.refresh}},[e._v("refresh")]),e._v(" - "),n("a",{staticClass:"small text-danger",attrs:{"data-tt":"Disconnect from Wappointment.com",href:"javascript:;"},on:{click:e.disconnectWappo}},[e._v("disconnect")]),e._v(" "),n("Connections",{attrs:{connections:e.calendar.connected.services,vertical:!0,showLabel:!0}}),e._v(" "),n("div",{staticClass:"small"},[n("a",{attrs:{href:e.addMoreService,target:"_blank","data-tt":"Enable new services from your account page on Wappointment.com"}},[e._v("Enable/Disable services")])])],1):n("div",[n("div",{staticClass:"mb-3"},[n("InputPh",{attrs:{ph:e.get_i18n("cals_account_enter_code","settings")},model:{value:e.account_key,callback:function(t){e.account_key=t},expression:"account_key"}})],1),e._v(" "),n("button",{staticClass:"btn btn-primary btn-block btn-lg mb-2",on:{click:e.connectToWappo}},[e._v(e._s(e.get_i18n("cals_account_connect","settings")))]),e._v(" "),n("div",{staticClass:"text-muted"},[e._v(e._s(e.get_i18n("cals_account_donthave","settings"))+" "),n("a",{attrs:{href:e.createAccount,target:"_blank"}},[e._v(e._s(e.get_i18n("cals_account_create_free","settings")))])])])]),e._v(" "),e.calendar.connected?e._e():n("div",{staticClass:"create-account ml-xl-4"},[n("h2",[e._v(e._s(e.get_i18n("cals_account_create_title","settings")))]),e._v(" "),n("ul",[n("li",[e._v(e._s(e.get_i18n("cals_account_connect_fav","settings")))]),e._v(" "),n("li",[n("ol",[n("li",[e._v(e._s(e.get_i18n("cals_account_connect_fav_1","settings"))+" "),n("strong",[n("img",{attrs:{src:e.connectionImage("zoom")}}),e._v(" Zoom")]),e._v(" & "),n("strong",[n("img",{attrs:{src:e.connectionImage("googlemeet")}}),e._v(" Google Meet")])]),e._v(" "),n("li",[e._v(e._s(e.get_i18n("cals_account_connect_fav_2","settings"))+" "),n("strong",[n("img",{attrs:{src:e.connectionImage("google")}}),e._v(" Google Calendar")])]),e._v(" "),n("li",[e._v(e._s(e.get_i18n("cals_account_connect_fav_3","settings")))])])])])])])])},[],!1,null,null,null).exports),$=n("6CjO");var z={mixins:[v.a],components:{VideoIframe:$.a},props:["calendar"],data:function(){return{calurl:"",calendar_type:"",showGoogle:!1,showIcal:!1,showOutlook:!1}},created:function(){this.mainService=this.$vueService(new i.a)},watch:{calurl:function(e,t){void 0!==e&&("webcal://"==e.substr(0,9)&&(this.calurl=e.replace("webcal://","http://")),-1!=e.indexOf("outlook")&&(this.calendar_type="outlook"),-1!=e.indexOf("calendar.google")&&(this.calendar_type="google"),-1!=e.indexOf("icloud.com")&&(this.calendar_type="ical"))}},computed:{showPopup:function(){return this.showGoogle||this.showIcal||this.showOutlook},getYouTubeUrl:function(){return this.showGoogle?"https://www.youtube.com/embed/5D_CfTJ9FzA":this.showIcal?"https://www.youtube.com/embed/H0A7Jc0G84Y":this.showOutlook?"https://www.youtube.com/embed/-BXafWQs8wg":void 0}},methods:{hideModal:function(){this.showGoogle=this.showIcal=this.showOutlook=!1},toggleModalGoogle:function(){this.hideModal(),this.showGoogle=!this.showGoogle},toggleModalIcal:function(){this.hideModal(),this.showIcal=!this.showIcal},toggleModalOutlook:function(){this.hideModal(),this.showOutlook=!this.showOutlook},skipStep:function(){this.$emit("skipStep")},saveCal:function(){this.request(this.saveCalRequest,{calendar_id:this.calendar.id,calurl:this.calurl},null,!1,this.saveCalSuccess)},saveCalSuccess:function(e){this.$emit("savedSync",e)},saveCalRequest:function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("saveCal",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(s,i){try{var r=t[s](i),o=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}("next")})});return function(e){return t.apply(this,arguments)}}()}},B=Object(h.a)(z,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-4 mx-2"},[n("p",{staticClass:"h6 text-muted"},[e._v(e._s(e.get_i18n("cals_connect_external_desc","settings")))]),e._v(" "),n("div",[n("label",{attrs:{for:"calurl"}},[e._v(e._s(e.get_i18n("cals_connect_external_paste","settings")))]),e._v(" "),n("div",{staticClass:"input-group input-group-sm "},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.calurl,expression:"calurl"}],staticClass:"form-control",attrs:{type:"text",id:"calurl",placeholder:"http://"},domProps:{value:e.calurl},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?(t.preventDefault(),e.saveCal(t)):null},input:function(t){t.target.composing||(e.calurl=t.target.value)}}}),e._v(" "),n("div",{staticClass:"input-group-append"},[n("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:e.saveCal}},[e._v(e._s(e.get_i18n("save","common")))])])]),e._v(" "),n("p",{staticClass:"small text-right"},[e._v(e._s(e.get_i18n("cals_connect_external_how_url","settings"))+" \n            "),n("span",{staticClass:"btn btn-link btn-xs",on:{click:e.toggleModalGoogle}},[e._v("Google Calendar")]),e._v(" "),n("span",{staticClass:"btn btn-link btn-xs",on:{click:e.toggleModalIcal}},[e._v("Apple iCal")]),e._v(" "),n("span",{staticClass:"btn btn-link btn-xs",on:{click:e.toggleModalOutlook}},[e._v("Outlook Calendar")])])]),e._v(" "),e.showPopup?n("div",[n("a",{attrs:{href:"javascript:;"},on:{click:e.hideModal}},[e._v(e._s(e.get_i18n("hide","common")))]),e._v(" "),n("h4",{staticClass:"modal-title",attrs:{slot:"title"},slot:"title"},[e.showGoogle?n("span",[e._v(e._s(e.get_i18n("cals_connect_external_get_url","settings").replace("%s","Google Calendar")))]):e._e(),e._v(" "),e.showIcal?n("span",[e._v(e._s(e.get_i18n("cals_connect_external_get_url","settings").replace("%s","Apple iCal")))]):e._e(),e._v(" "),e.showOutlook?n("span",[e._v(e._s(e.get_i18n("cals_connect_external_get_url","settings").replace("%s","Outlook Live")))]):e._e()]),e._v(" "),n("div",[n("VideoIframe",{attrs:{src:e.getYouTubeUrl}})],1)]):e._e()])},[],!1,null,null,null).exports,G={props:["calendar"],mixins:[v.a],computed:{addonLink:function(){return apiWappointment.apiSite+"/addons"}}},U=Object(h.a)(G,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"my-4 mx-2"},[n("p",{staticClass:"h6 text-muted"},[e._v(e._s(e.get_i18n("cals_connect_external_export","settings")))]),e._v(" "),n("div",{staticClass:"text-danger text-left small"},[e._v("The "),n("strong",[n("a",{attrs:{href:e.addonLink,target:"_blank"}},[e._v("Calendar Sync")])]),e._v(" addon is required to use that feature")])])},[],!1,null,null,null).exports,V={components:window.wappointmentExtends.filter("icsExternalComponents",{StaffModalWrapper:D,StaffCalendarsExternalImport:B,StaffCalendarsExternalExport:U}),props:["user"],data:function(){return{activeTab:"import",tabs:null}},created:function(){this.tabs={import:{label:this.get_i18n("cals_ext_import","settings"),component:"StaffCalendarsExternalImport"},export:{label:this.get_i18n("cals_ext_export","settings"),component:"StaffCalendarsExternalExport"}}},computed:{activeComp:function(){return this.tabs[this.activeTab].component}},methods:{saveCalSuccess:function(e){this.$emit("savedSync",e),this.$WapModal().notifySuccess(e.data.message)},isActive:function(e){return e==this.activeTab},changeTab:function(e){this.activeTab=e}}},N=Object(h.a)(V,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("StaffModalWrapper",{attrs:{nosave:"",user:e.user}},[n("div",{attrs:{id:"buttons-block"}},[n("ul",{staticClass:"nav nav-tabs row px-4",attrs:{id:"myTabICS",role:"tablist"}},e._l(e.tabs,function(t,a){return n("li",{staticClass:"nav-item"},[n("span",{staticClass:"nav-link",class:{active:e.isActive(a)},on:{click:function(t){e.changeTab(a)}}},[e._v(e._s(t.label))])])}),0),e._v(" "),e.activeComp?n(e.activeComp,{tag:"component",attrs:{calendar:e.user},on:{savedSync:e.saveCalSuccess}}):e._e()],1)])},[],!1,null,null,null).exports;function H(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(s,i){try{var r=t[s](i),o=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}("next")})}}var Z={props:["staff","mainService","isUserAdministrator"],mixins:[v.a],components:{StaffModalWrapper:D},data:function(){return{custom_fields:[],field_values:{},adding:!1,field_name:"",deleted_fields:[],editingField:!1}},created:function(){void 0!==this.staff.custom_fields&&(this.field_values=Object.assign({},this.staff.custom_fields)),this.loadCustomFields()},computed:{filteredCF:function(){var e=this.deleted_fields;return this.custom_fields.filter(function(t){return-1===e.indexOf(t.key)})},isValidField:function(){return""!=this.field_name.trim()}},methods:{closeRefresh:function(){this.$emit("close")},loadedFields:function(e){this.custom_fields=e.data.custom_fields},loadCustomFields:function(){this.request(this.loadCustomFieldsRequest,{},void 0,!1,this.loadedFields)},loadCustomFieldsRequest:function(){var e=H(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("loadCustomFields");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),saveCustomFields:function(e,t,n){this.request(this.saveCustomFieldsRequest,{id:this.staff.id,custom_fields:this.custom_fields,values:this.field_values,deleted:this.deleted_fields},void 0,!1,this.closeRefresh)},saveCustomFieldsRequest:function(){var e=H(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("saveCustomFields",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),updateFieldName:function(){this.field_name=this.field_name.trim()},deleteField:function(e){var t=this;this.$WapModal().confirm({title:"Do you really want to delete this field?",content:"It Will be removed for every staff"}).then(function(n){!0===n&&t.deleted_fields.push(e)})},newField:function(){this.adding=!0},editField:function(e){this.editingField=e,this.newField(),this.field_name=e.name},saveField:function(){if(!this.isValidField)return!1;this.editingField?this.updateLabel():this.insertField(),this.field_name="",this.adding=!1,this.editingField=!1},updateLabel:function(){var e=this.editingField.key,t=this.custom_fields.findIndex(function(t){return t.key==e});this.custom_fields[t].name=this.field_name},insertField:function(){this.custom_fields.push({name:this.field_name,key:this.generateNamekey(this.field_name)})},generateNamekey:function(e){return e.toLowerCase().replace(/[^a-z0-9]/gi,"_")},loaded:function(e){this.custom_fields=-1===[null,void 0,!1].indexOf(e.data.custom_fields)?e.data.custom_fields:[]}}},K=Object(h.a)(Z,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("StaffModalWrapper",{attrs:{nosave:"",user:e.staff},on:{save:e.save}},[n("div",{staticClass:"mb-2"},[n("div",[e._v("Describe your staff better with fields to be used in emails and SMS")]),e._v(" "),n("div",{staticClass:"text-muted small"},[e._v("For instance, you can create fields for staff's phone number or Skype account and ask the clients to call on those within the confirmation emails")])]),e._v(" "),n("div",{staticClass:"p-2 rounded bg-secondary"},[e.adding?n("div",[n("InputPh",{attrs:{ph:"Field name"},model:{value:e.field_name,callback:function(t){e.field_name=t},expression:"field_name"}}),e._v(" "),n("button",{staticClass:"btn btn-primary",class:{disabled:!e.isValidField},on:{click:e.saveField}},[e._v(e._s(e.get_i18n("save","common")))])],1):n("div",[e.isUserAdministrator?n("button",{staticClass:"btn btn-secondary btn-sm mb-2",on:{click:e.newField}},[n("span",{staticClass:"dashicons dashicons-insert"}),e._v(" Add Custom Field")]):e._e(),e._v(" "),e.filteredCF.length>0?n("div",[e._l(e.filteredCF,function(t){return n("div",{staticClass:"d-flex align-items-center"},[n("div",[n("InputPh",{attrs:{ph:t.name},model:{value:e.field_values[t.key],callback:function(n){e.$set(e.field_values,t.key,n)},expression:"field_values[field.key]"}})],1),e._v(" "),n("a",{attrs:{href:"javascript:;"},on:{click:function(n){e.deleteField(t.key)}}},[n("span",{staticClass:"dashicons dashicons-trash"})]),e._v(" "),n("a",{attrs:{href:"javascript:;","data-tt":"Edit Field Label"},on:{click:function(n){e.editField(t)}}},[n("span",{staticClass:"dashicons dashicons-edit"})])])}),e._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:e.saveCustomFields}},[e._v("Save staff values")])],2):e._e()])])])},[],!1,null,null,null).exports,Y={mixins:[y.a],components:{RegularAvailability:o.a},props:["defaultSettings"],computed:{getRegav:function(){return this.defaultSettings.regav}},data:function(){return{regavUpdated:!1}},methods:{updatedRA:function(e){this.regavUpdated=e},saveDefaultRegav:function(){this.settingSave("regavDefault",this.regavUpdated)}}},J=(n("4HCW"),Object(h.a)(Y,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",{staticClass:"h4"},[e._v("Set the default availability that will be used for new staff")]),e._v(" "),n("RegularAvailability",{attrs:{initValue:e.getRegav,minimal:!0,viewData:e.defaultSettings},on:{updatedDays:e.updatedRA}}),e._v(" "),e.regavUpdated?n("div",{staticClass:"save-floating-button button-absolute"},[n("button",{staticClass:"btn btn-primary",on:{click:e.saveDefaultRegav}},[e._v(e._s(e.get_i18n("save","common")))])]):e._e()],1)},[],!1,null,null,null).exports),X={mixins:[y.a],components:{SearchDropdown:R.a},props:["defaultSettings","services"],data:function(){return{assignAll:!0,defaultServices:[]}},created:function(){this.assignAll=!0===this.defaultSettings,this.defaultServices=!0!==this.assignAll?[].concat(this.defaultSettings):[].concat(this.services.map(function(e){return e.id}))},methods:{saveDefaultServices:function(){this.settingSave("servicesDefault",!!this.assignAll||this.defaultServices)}}},Q=Object(h.a)(X,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",{staticClass:"h4"},[e._v("Set the default services that will be assigned to new staff")]),e._v(" "),n("div",[n("label",{staticClass:"form-check-label",attrs:{for:"Assign all services available to new staff"}},[n("div",{staticClass:"d-flex align-items-center"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.assignAll,expression:"assignAll"}],attrs:{type:"checkbox",id:"allow-cancel"},domProps:{checked:Array.isArray(e.assignAll)?e._i(e.assignAll,null)>-1:e.assignAll},on:{change:function(t){var n=e.assignAll,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=e._i(n,null);a.checked?i<0&&(e.assignAll=n.concat([null])):i>-1&&(e.assignAll=n.slice(0,i).concat(n.slice(i+1)))}else e.assignAll=s}}}),e._v("\n                Assign all services \n            ")])])]),e._v(" "),!0!==e.assignAll?n("SearchDropdown",{attrs:{hasMulti:"",ph:"Pick default services staff",elements:e.services,idKey:"id",labelSearchKey:"name"},model:{value:e.defaultServices,callback:function(t){e.defaultServices=t},expression:"defaultServices"}}):e._e(),e._v(" "),n("button",{staticClass:"btn btn-primary mt-2",on:{click:e.saveDefaultServices}},[e._v(e._s(e.get_i18n("save","common")))])],1)},[],!1,null,null,null).exports,ee=n("EjpI"),te=n("BIr2"),ne=n("PqtY");function ae(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(s,i){try{var r=t[s](i),o=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}("next")})}}var se,ie,re,oe,ce={extends:a.a,components:{ValueCard:s.a,DurationCell:k.a,CalendarsAddEdit:r.a,WeeklyAvailability:p,Connections:b,CalendarsRegav:S,ShortcodeDesigner:A.a,StaffCalendarsExternal:N,StaffCalendarsIntegrations:W,StaffPermissionsManager:I,StaffAssignServices:O,StaffCustomFieldEditor:K,StaffDefaultAvailability:J,StaffDefaultServices:Q},mixins:[C,y.a,ee.a,te.a,ne.a],data:function(){return{currentView:"listing",viewName:"empty",elementPassed:null,calendarsOrder:[],showShortcode:!1,dotcomOpen:!1,editingExternal:!1,editingServices:!1,showPermissions:!1,editCustomField:!1,editingDefaultAvailability:!1,editingDefaultServices:!1,largeModal:!1}},created:function(){this.mainService=this.$vueService(new i.a)},computed:{searchable:function(){return this.elements.calendars},calendarListing:function(){return"listing"==this.currentView},calendarAdd:function(){return-1!==["add","edit"].indexOf(this.currentView)},calendarRegav:function(){return"regav"==this.currentView},canGetShortCode:function(){return this.canCalendarEdit("wappo_self_shortcode")},canCalEditServices:function(){return this.canCalendarEdit("wappo_self_services")},canCalConnectAccount:function(){return this.canCalendarEdit("wappo_self_connect_account")},canCalAddIcs:function(){return this.canCalendarEdit("wappo_self_add_ics")},canCalDelIcs:function(){return this.canCalendarEdit("wappo_self_del_ics")},canCalEditWeekly:function(){return this.canCalendarEdit("wappo_self_weekly")},canCalUnpublish:function(){return this.canCalendarEdit("wappo_self_unpublish")},canEditCf:function(){return this.canCalendarEdit("wappo_self_cf")},canCalEdit:function(){return this.canCalendarEdit("wappo_self_man")},calendarsUsed:function(){return this.searchable.map(function(e){return e.wp_uid})}},methods:{canCalendarEdit:function(e){return this.isUserAdministrator||this.hasPermission(e)},isStaffCalendar:function(e){return this.isUserAdministrator},getShortCode:function(e){this.showShortcode=e,this.openPopup("Get Booking Widget Shortcode")},goToSync:function(e){this.calendarLimitReached(e)||(this.editingExternal=e,this.openPopup(this.get_i18n("cals_connected_calendar","settings")))},goToDotCom:function(e){this.dotcomOpen=e,this.openPopup("Connect to Zoom, Google Calendar etc...")},setCustomFields:function(e){this.editCustomField=e,this.openPopup("Set custom Fields")},setDefaultAvailability:function(){this.editingDefaultAvailability=!0,this.largeModal=!0,this.openPopup("Default availability")},setDefaultServices:function(){this.editingDefaultServices=!0,this.openPopup("Default services")},editServices:function(e){this.editingServices=e,this.openPopup("Edit services allowed")},editPermission:function(e){this.showPermissions=e,this.openPopup("Edit user permissions")},hideElementsPopup:function(e){this.showShortcode=!1,this.editingExternal=!1,this.dotcomOpen=!1,this.editingServices=!1,this.showPermissions=!1,this.editCustomField=!1,this.editingDefaultAvailability=!1,this.editingDefaultServices=!1,this.largeModal=!1},saveServices:function(e){this.request(this.saveServicesRequest,{id:this.editingServices.id,services:e},void 0,!1,this.closeRefresh)},saveServicesRequest:function(){var e=ae(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("saveService",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),savePermissions:function(e){this.request(this.savePermissionsRequest,{id:this.showPermissions.id,permissions:e},void 0,!1,this.closeRefresh)},savePermissionsRequest:function(){var e=ae(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("savePermission",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),closeRefresh:function(){this.hidePopup(),this.hasBeenSavedDeleted()},displayServiceName:function(e,t){var n=t.find(function(t){return t.id==e});return void 0!==n?n.name:"Undefined service"},reloadListing:function(){this.hidePopup(),this.showListing(),this.loadElements()},afterLoaded:function(){if(this.$route.params.id){this.currentView="edit";var e=this.$route.params.id;this.editAvailability(this.elements.calendars.find(function(t){return t.id==e}),!1)}else"calendars_zoom_account"==this.$route.name&&this.goToDotCom(this.elements.calendars[0]);this.$emit("fullyLoaded")},getExternals:function(e){return void 0!==e.calendar_urls?!1!==e.calendar_urls&&Object.keys(e.calendar_urls).length>0&&e.calendar_urls:!1!==e.options.calendar_urls&&Object.keys(e.options.calendar_urls).length>0&&e.options.calendar_urls},editAvailability:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.elementPassed=e,this.currentView=this.elements.db_required?"regav":"edit",!this.elements.db_required&&t&&this.$router.push({name:"calendars_edit",params:{id:e.id}})},calendarLimitReached:function(e){return!1!==e.calendar_urls&&Object.keys(e.calendar_urls).length>3},loadElements:function(){"listing"==this.currentView&&this.request(this.requestElements,{},void 0,!1,this.loadedElements,this.failedLoadingElements)},orderChanged:function(e){this.request(this.reorderRequest,{id:e.moved.element.id,new_sorting:e.moved.newIndex},void 0,!1,this.hasBeenSavedNoReload)},reorderRequest:function(){var e=ae(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("reorder",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),hasBeenSavedNoReload:function(e){return this.hasBeenSavedDeleted(e,!1)},hasBeenSavedDeleted:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.reloadListing()},deleteCalendar:function(e){var t=this;this.$WapModal().confirm({title:"Do you really want to delete this calendar?"}).then(function(n){!1!==n&&t.request(t.deleteRequest,{id:e},void 0,!1,t.hasBeenSavedDeleted)})},toggleStatus:function(e,t){return this.elements.db_required?this.runDbUpdate():this.request(this.toggleRequest,{id:e.id},void 0,!1,this.hasBeenToggled.bind(null,t))},hasBeenToggled:function(e,t){var n=this.elements.calendars;n[e].status=1==n[e].status?0:1,this.elements.calendars=[],setTimeout(this.reFeedCalendars.bind(null,n),100)},reFeedCalendars:function(e){this.elements.calendars=e},toggleRequest:(oe=ae(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("toggle",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return oe.apply(this,arguments)}),disconnectCalendar:function(e,t){var n=this;this.$WapModal().confirm({title:"Confirm calendar disconnection?"}).then(function(a){!1!==a&&n.request(n.disconnectCalendarRequest,{calendar_id:e,staff_id:t},void 0,!1,n.disconnectCalendarSuccess)})},disconnectCalendarRequest:(re=ae(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("disconnectCal",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return re.apply(this,arguments)}),disconnectCalendarSuccess:function(e){this.$WapModal().notifySuccess(e.data.message),this.reloadListing()},refreshManually:function(e){this.request(this.refreshCalendarsRequest,{staff_id:e},void 0,!1,this.disconnectCalendarSuccess)},refreshCalendarsRequest:(ie=ae(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("refreshCalendars",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return ie.apply(this,arguments)}),deleteRequest:(se=ae(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("delete",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return se.apply(this,arguments)}),editElement:function(e){this.crumb?this.$emit("updateCrumb",[{target:"goToMain",label:"General"},{target:"goToCalendar",label:"Calendars",subview:"listing"},{target:"goToCalendarAdd",label:"Edit",disabled:!0}],"edit",{element:e}):(this.currentView="edit",this.elementPassed=e)},showCalendar:function(){return this.elements.db_required?this.runDbUpdate():!1!==this.elements.limit_reached?this.requiresAddon("staff",this.elements.limit_reached):void(this.crumb?this.$emit("updateCrumb",[{target:"goToMain",label:"General"},{target:"goToCalendar",label:"Calendars",subview:"listing"},{target:"goToCalendarAdd",label:"Add",disabled:!0}],"add"):(this.currentView="add",this.elementPassed={avatar:"",gravatar:"",name:"",id:"",timezone:this.elements.staffDefault.timezone,regav:this.elements.staffDefault.regav,avb:this.elements.staffDefault.availaible_booking_days}))},showListing:function(){this.crumb?this.$emit("updateCrumb",[{target:"goToMain",label:"General"},{target:"goToCalendar",label:"Calendars",disabled:!0}],"listing"):(this.currentView="listing",this.elementPassed=null,this.$router.push({name:"calendars"}))}}},le=(n("dqqa"),Object(h.a)(ce,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.calendarListing?n("div",[n("div",{staticClass:"d-flex align-items-center"},[e.isUserAdministrator?n("button",{staticClass:"btn btn-outline-primary btn my-2",on:{click:e.showCalendar}},[e._v(e._s(e.get_i18n("create","common")))]):e._e(),e._v(" "),e.loadedData&&e.elements.calendars.length>10?n("InputPh",{staticClass:"max-200 ml-2 mb-0",attrs:{type:"text",ph:"Search name"},model:{value:e.searchterm,callback:function(t){e.searchterm=t},expression:"searchterm"}}):e._e()],1),e._v(" "),e.loadedData?n("div",{staticClass:"table-hover"},[n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[e._v("#")]),e._v(" "),n("th",{attrs:{scope:"col"}},[e._v(e._s(e.get_i18n("cals_name","settings")))]),e._v(" "),n("th",{attrs:{scope:"col"}},[n("div",{staticClass:"headerToggle"},[e._v(e._s(e.get_i18n("cals_regav","settings"))+" "),n("a",{attrs:{href:"javascript:;"},on:{click:e.setDefaultAvailability}},[e._v(e._s(e.get_i18n("cals_set_default","settings")))])])]),e._v(" "),e.elements.db_required?e._e():n("th",{attrs:{scope:"col"}},[n("div",{staticClass:"headerToggle"},[e._v(e._s(e.get_i18n("service_title","settings"))+" "),n("a",{attrs:{href:"javascript:;"},on:{click:e.setDefaultServices}},[e._v(e._s(e.get_i18n("cals_set_default","settings")))])])]),e._v(" "),n("th",{attrs:{scope:"col"}},[e._v(e._s(e.get_i18n("cals_integration","settings")))]),e._v(" "),n("th",{attrs:{scope:"col"}},[e._v(e._s(e.get_i18n("cals_connected_calendar","settings")))])])]),e._v(" "),e.elements.calendars.length>0?n("draggable",{attrs:{draggable:".row-click",handle:".dashicons-move",tag:"tbody"},on:{change:e.orderChanged},model:{value:e.elements.calendars,callback:function(t){e.$set(e.elements,"calendars",t)},expression:"elements.calendars"}},e._l(e.filteredSearchable,function(t,a){return n("tr",{staticClass:"row-click"},[n("td",[e._v("\n                            "+e._s(a+1)+"\n                        ")]),e._v(" "),n("td",[n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"calendar-pic",class:[1==t.status?"active":"inactive"]},[n("img",{staticClass:"wrounded",attrs:{src:t.avatar,width:"40",alt:t.name}}),e._v(" "),e.canCalUnpublish?n("span",{staticClass:"status",attrs:{role:"button","data-tt":[1==t.status?"Active":"Inactive"]},on:{click:function(n){e.toggleStatus(t,a)}}}):e._e()]),e._v(" "),n("div",{staticClass:"ml-2"},[n("div",[e._v(e._s(t.name))]),e._v(" "),n("small",[e._v(e._s(t.timezone))])])]),e._v(" "),e.isUserAdministrator||e.canCalEdit?n("div",{staticClass:"wlist-actions text-muted"},[e.isUserAdministrator&&""==e.searchterm&&e.elements.calendars.length>1?n("span",{attrs:{"data-tt":e.get_i18n("sort","common")}},[n("span",{staticClass:"dashicons dashicons-move"})]):e._e(),e._v(" "),n("span",{attrs:{"data-tt":e.get_i18n("edit","common")}},[n("span",{staticClass:"dashicons dashicons-edit",on:{click:function(n){n.preventDefault(),n.stopPropagation(),e.editAvailability(t)}}})]),e._v(" "),e.isUserAdministrator?n("span",{attrs:{"data-tt":e.get_i18n("delete","common")}},[n("span",{staticClass:"dashicons dashicons-trash",on:{click:function(n){n.preventDefault(),n.stopPropagation(),e.deleteCalendar(t.id)}}})]):e._e(),e._v(" "),e.canGetShortCode?n("span",{attrs:{"data-tt":e.get_i18n("getshort","common")}},[n("span",{staticClass:"dashicons dashicons-shortcode",on:{click:function(n){n.preventDefault(),n.stopPropagation(),e.getShortCode(t.id)}}})]):e._e(),e._v(" "),e.isStaffCalendar(t)?n("span",{attrs:{"data-tt":e.get_i18n("cals_permi","settings")}},[n("span",{staticClass:"dashicons dashicons-unlock",on:{click:function(n){n.preventDefault(),n.stopPropagation(),e.editPermission(t)}}})]):e._e(),e._v(" "),e.elements.allowStaffCf&&e.canEditCf?n("span",{attrs:{"data-tt":e.get_i18n("cals_setcf","settings")}},[n("span",{staticClass:"dashicons dashicons-editor-code",on:{click:function(n){n.preventDefault(),n.stopPropagation(),e.setCustomFields(t)}}})]):e._e(),e._v(" "),n("span",[e._v("(id: "+e._s(t.id)+")")])]):e._e()]),e._v(" "),n("td",[n("CalendarsRegav",{attrs:{canEdit:e.canCalEditWeekly,calendar:t},on:{edit:e.editAvailability}})],1),e._v(" "),e.elements.db_required?e._e():n("td",{staticClass:"cell-services"},[t.services.length>0?[n("div",{staticClass:"d-flex flex-wrap",attrs:{role:"button"}},e._l(t.services,function(t){return n("ValueCard",{key:t,attrs:{canDiscard:!1}},[e._v(e._s(e.displayServiceName(t,e.elements.services))+" ")])}),1),e._v(" "),e.canCalEditServices?n("button",{staticClass:"btn btn-xs btn-outline-primary",on:{click:function(n){e.editServices(t)}}},[e._v(e._s(e.get_i18n("cals_assign_service","settings")))]):e._e()]:[n("div",{staticClass:"text-danger small"},[e._v("Missing service")]),e._v(" "),e.canCalEditServices?n("button",{staticClass:"btn btn-xs btn-outline-primary",on:{click:function(n){e.editServices(t)}}},[e._v("Add service")]):e._e()]],2),e._v(" "),n("td",[n("Connections",{attrs:{connections:void 0===t.connected.services?[]:t.connected.services}}),e._v(" "),e.canCalConnectAccount?n("div",[t.connected?n("a",{staticClass:"small",attrs:{href:"javascript:;"},on:{click:function(n){e.goToDotCom(t)}}},[e._v(e._s(e.get_i18n("edit","common")))]):n("button",{staticClass:"btn btn-xs btn-outline-primary tt-lg mt-2",on:{click:function(n){e.goToDotCom(t)}}},[e._v(e._s(e.get_i18n("cals_account_connect","settings")))])]):e._e()],1),e._v(" "),n("td",[e.getExternals(t)?n("div",{staticClass:"d-flex"},[e._l(e.getExternals(t),function(a,s){return n("div",{staticClass:"unclickable cal-icon"},[n("div",{staticClass:"dashicons dashicons-calendar-alt"}),e._v(" "),n("div",{staticClass:"card cardb p-2 px-3 mt-1 cal-desc"},[n("div",{staticClass:"d-flex flex-row justify-content-between "},[n("div",[n("div",{staticClass:"small text-primary"},[e._v(e._s(a))]),e._v(" "),n("p",{staticClass:"vsmall text-muted m-0"},[e._v("\n                                                Last checked: "),n("span",{staticClass:"data-item"},[e._v(e._s(e.lastChecked(s,t)))]),e._v(" | \n                                                Last changed: "),n("span",{staticClass:"data-item"},[e._v(e._s(e.lastChanged(s,t)))]),e._v(" | \n                                                Process duration: "),n("span",{staticClass:"data-item"},[e._v(e._s(e.calDuration(s,t)))])])]),e._v(" "),e.canCalDelIcs?n("button",{staticClass:"align-self-start btn btn-xs btn-link hidden",attrs:{"data-tt":"Disconnect Calendar"},on:{click:function(n){e.disconnectCalendar(s,t.id)}}},[n("span",{staticClass:"dashicons dashicons-dismiss"})]):e._e()])])])}),e._v(" "),e.canCalAddIcs?n("a",{staticClass:"small d-flex align-items-center",attrs:{href:"javascript:;"},on:{click:function(n){e.refreshManually(t.id)}}},[n("span",{staticClass:"dashicons dashicons-update"}),e._v(" Refresh all")]):e._e()],2):e._e(),e._v(" "),n("div",[e.canCalAddIcs&&!e.calendarLimitReached(t)?n("button",{staticClass:"btn btn-xs btn-outline-primary tt-lg",attrs:{"data-tt":e.get_i18n("cals_connect_external_tip","settings")},on:{click:function(n){e.goToSync(t)}}},[e._v(e._s(e.get_i18n("cals_connect_external","settings")))]):e._e()])])])}),0):n("tbody",[n("tr",[e._v("\n                        "+e._s(e.get_i18n("empty_listing","common"))+"\n                    ")])])],1)]):e._e()]):e._e(),e._v(" "),e.calendarAdd?n("div",[n("button",{staticClass:"btn btn-link btn-xs mb-2",on:{click:e.showListing}},[e._v(" < "+e._s(e.get_i18n("back","common")))]),e._v(" "),n("CalendarsAddEdit",{attrs:{calendar:e.elementPassed,timezones_list:e.elements.timezones_list,staffs:e.elements.staffs,services:e.elements.services,calendarsUsed:e.calendarsUsed},on:{saved:e.hasBeenSavedDeleted}})],1):e._e(),e._v(" "),e.calendarRegav?n("div",[n("button",{staticClass:"btn btn-link btn-xs mb-2",on:{click:e.showListing}},[e._v(" < "+e._s(e.get_i18n("back","common")))]),e._v(" "),n("WeeklyAvailability",{attrs:{calendar:e.elementPassed,timezones_list:e.elements.timezones_list,staffs:e.elements.staffs}})],1):e._e(),e._v(" "),e.showModal?n("WapModal",{attrs:{show:e.showModal,large:e.largeModal,noscroll:""},on:{hide:e.hidePopup}},[n("h4",{staticClass:"modal-title",attrs:{slot:"title"},slot:"title"},[e._v(" "+e._s(e.modalTitle)+" ")]),e._v(" "),e.showShortcode?n("ShortcodeDesigner",{attrs:{calendar_id:e.showShortcode,calendars:e.elements.calendars,services:e.elements.services,showTip:!1}}):e._e(),e._v(" "),e.showPermissions?n("StaffPermissionsManager",{attrs:{permissions:e.elements.permissions,user:e.showPermissions},on:{save:e.savePermissions}}):e._e(),e._v(" "),e.editCustomField?n("StaffCustomFieldEditor",{attrs:{staff:e.editCustomField,mainService:e.mainService,isUserAdministrator:e.isUserAdministrator},on:{close:e.closeRefresh}}):e._e(),e._v(" "),e.editingServices?n("StaffAssignServices",{attrs:{user:e.editingServices,current:e.editingServices.services,services:e.elements.services},on:{save:e.saveServices}}):e._e(),e._v(" "),e.dotcomOpen?n("StaffCalendarsIntegrations",{attrs:{calendar:e.dotcomOpen},on:{reload:e.reloadListing}}):e._e(),e._v(" "),e.editingExternal?n("StaffCalendarsExternal",{attrs:{user:e.editingExternal,noback:""},on:{savedSync:e.reloadListing}}):e._e(),e._v(" "),e.editingDefaultAvailability?n("StaffDefaultAvailability",{attrs:{defaultSettings:e.elements.staffDefault}}):e._e(),e._v(" "),e.editingDefaultServices?n("StaffDefaultServices",{attrs:{defaultSettings:e.elements.servicesDefault,services:e.elements.services}}):e._e()],1):e._e()],1)},[],!1,null,null,null));t.default=le.exports},AsP0:function(e,t,n){"use strict";var a=n("xV/h"),s=n("Qi5d"),i=n("MkfN"),r=n("6CjO"),o={mixins:window.wappointmentExtends.filter("shortcodeDesignerMixins",[i.a]),props:{title:{type:String,default:"Book now!"},calendar_id:{default:!1},service_id:{default:!1},services:{default:null},calendars:{default:null},simple:{default:!1}},data:function(){return{shortcode:"",clicked:!1,canLockStaff:!1,canLockService:!1,showingTip:!1}},components:{ClickCopy:a.a,VideoIframe:r.a,ShortcodeGenerator:s.a},methods:{updateShortCode:function(e){this.shortcode=e}},computed:{shortCodeHasService:function(){return-1!==this.shortcode.indexOf('service="')},shortCodeHasCalendar:function(){return-1!==this.shortcode.indexOf('staff="')},addonLink:function(){return apiWappointment.apiSite+"/addons"}}},c=(n("CwPI"),n("KHd+")),l=Object(c.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"shortcode-editor"},[n("div",{staticClass:"shortcode-gen"},[n("ShortcodeGenerator",{attrs:{title:e.title,calendar_id:e.calendar_id,service_id:e.service_id,calendars:e.calendars,services:e.services,simple:e.simple,canLockStaff:e.canLockStaff,canLockService:e.canLockService},on:{change:e.updateShortCode}})],1),e._v(" "),n("div",{attrs:{id:"shortcode_block"}},[n("p",{staticClass:"m-0"},[e._v(e._s(e.get_i18n("bwe_your_sh","common")))]),e._v(" "),n("ClickCopy",{attrs:{value:e.shortcode},on:{clicked:function(t){e.clicked=!0}}}),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.clicked?n("div",[!e.canLockStaff&&e.shortCodeHasCalendar?n("div",{staticClass:"text-danger text-left small"},[e._v("The lock on calendar will work only with the "),n("strong",[n("a",{attrs:{href:e.addonLink,target:"_blank"}},[e._v("Calendars & Staff")])]),e._v(" addon")]):e._e(),e._v(" "),!e.canLockService&&e.shortCodeHasService?n("div",{staticClass:"text-danger text-left small mt-2"},[e._v("The lock on service will work only with the "),n("strong",[n("a",{attrs:{href:e.addonLink,target:"_blank"}},[e._v("Services Suite")])]),e._v(" addon")]):e._e()]):e._e()])],1)]),e._v(" "),e.showingTip?n("div",{staticClass:"mt-4"},[n("VideoIframe",{attrs:{src:"https://www.youtube.com/embed/VMi2Ry-JrGA"}})],1):n("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.showingTip=!0}}},[e._v(e._s(e.get_i18n("bwe_how_use_sh","common")))])])},[],!1,null,null,null);t.a=l.exports},B4pb:function(e,t,n){var a=n("djb6");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("5f6eb88f",a,!0,{})},BEd2:function(e,t,n){var a=n("4G2+");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("692c8151",a,!0,{})},BIr2:function(e,t,n){"use strict";var a={data:function(){return{searchterm:"",searchkey:"name"}},computed:{filteredSearchable:function(){var e=this.searchterm.toLowerCase(),t=this.searchkey;return this.searchable.filter(function(n){return-1!==n[t].toLowerCase().indexOf(e)})}}},s=n("KHd+"),i=Object(s.a)(a,void 0,void 0,!1,null,null,null);t.a=i.exports},CwPI:function(e,t,n){"use strict";var a=n("Q+ZH");n.n(a).a},EUEc:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.bullet-title{\n    color: #777;\n    border-bottom: 1px solid #c2c1cc;\n    font-weight: bold;\n}\n.bullet-wap{\n    border: 1px solid var(--primary);\n    padding: .35rem;\n    border-radius: 1.2rem;\n    height: 2rem;\n    width: 2rem;\n    display: inline-block;\n    text-align: center;\n    font-size: 1rem;\n    color: var(--primary);\n    margin-right: .5rem;\n    background-color: #fff;\n}\n.changename .label-wrapper{\n    margin-bottom: 0 !important;\n}\n.account-selector{\n    max-width: 380px;\n}\n",""])},F8zI:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.dayLabel {\n    text-transform: capitalize;\n    text-align: center;\n}\n.available-slot{\n    background-color: #ccc;\n    width: .3rem;\n    height: 1rem;\n}\n.available-slot:hover{\n    background-color: #37792a;\n}\n.available-slot.tt-below[data-tt]::before{\n    top:auto;\n    bottom: -200%;\n}\n.available-slot.tt-below[data-tt]::after{\n    top:auto;\n    bottom: 20%;\n}\n",""])},G5JO:function(e,t,n){"use strict";var a=n("A5Wa"),s=n("6uyd"),i={data:function(){return{shortDateFormat:"YYYY-MM-DD HH:mm"}},methods:{getMomentObject:function(){return a.a},setMomentLocale:function(){a.a.locale(Object(s.a)())},unixToDateTime:function(e,t){return e?a.a.unix(e).tz(t).format(this.shortDateFormat):"---"},getMoment:function(e,t){return a.a.unix(e).tz(t)},tzGuess:function(){return a.a.tz.guess()},getUnixNow:function(){return Object(a.a)().unix()}}},r=n("KHd+"),o=Object(r.a)(i,void 0,void 0,!1,null,null,null);t.a=o.exports},IvBe:function(e,t,n){"use strict";var a=n("B4pb");n.n(a).a},"KtV/":function(e,t,n){var a=n("F8zI");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("6da0343d",a,!0,{})},LFG5:function(e,t,n){var a=n("0LHV");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("89ba4b2e",a,!0,{})},OEWU:function(e,t,n){"use strict";var a=n("qhsB");n.n(a).a},PqtY:function(e,t,n){"use strict";var a={data:function(){return{showModal:!1,modalTitle:""}},methods:{openPopup:function(e){this.modalTitle=e,this.showModal=!0},hidePopup:function(e){this.modalTitle="popTitle",this.showModal=!1,void 0!==this.hideElementsPopup&&this.hideElementsPopup()}}},s=n("KHd+"),i=Object(s.a)(a,void 0,void 0,!1,null,null,null);t.a=i.exports},PwNG:function(e,t,n){var a=n("EUEc");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("6230efdf",a,!0,{})},"Q+ZH":function(e,t,n){var a=n("uChi");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("661e781e",a,!0,{})},Qi5d:function(e,t,n){"use strict";var a=n("FYyN"),s=n("c+oO"),i=n("ZfG2");var r,o,c={mixins:[a.a],components:{SearchDropdown:i.a},props:{preview:{type:Boolean,default:!0},title:{type:String,default:""},calendar_id:{default:!1},service_id:{default:!1},calendars:{default:null},services:{default:null},simple:{default:!1},canLockStaff:{default:!1},canLockService:{default:!1},popupInit:{default:!1}},data:function(){return{large:!1,open:!1,popup:!1,close_cross:!1,random:!1,center:!1,week:!1,staffpage:!1,titleGiven:"",active_staff_id:!1,active_service_id:!1,calendars_data:null,services_data:null,servicesService:null,calendarsService:null}},created:function(){this.titleGiven=this.title,this.active_staff_id=this.calendar_id,this.active_service_id=this.service_id,this.calendarsService=this.$vueService(new s.a),this.popup=this.popupInit,this.services&&this.calendars?this.setBaseData(this.calendars,this.services):this.loadCalendars()},methods:{setBaseData:function(e,t){this.calendars_data=e,this.services_data=t},loadCalendars:function(){this.request(this.requestCalendars,{},void 0,!1,this.loadedCalendars)},loadedCalendars:function(e){this.setBaseData(e.data.calendars,e.data.services)},requestCalendars:(r=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.calendarsService.call("index",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}),o=function(){var e=r.apply(this,arguments);return new Promise(function(t,n){return function a(s,i){try{var r=e[s](i),o=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});t(o)}("next")})},function(e){return o.apply(this,arguments)})},watch:{active_staff_id:function(e){-1===[void 0,!1,""].indexOf(e)&&(this.staffpage=!1)},popup:function(e){e&&(this.center=!1,this.large=!1)},staffpage:function(e){e&&(this.random=!1)}},computed:{staffSelected:function(){return-1===[void 0,!1,""].indexOf(this.active_staff_id)},filteredCalendars:function(){if(this.active_service_id&&this.calendars_data){var e=this.active_service_id;return this.calendars_data.filter(function(t){return-1!==t.services.indexOf(e)})}return this.calendars_data},filteredServices:function(){if(this.active_staff_id&&this.services_data){var e=this.active_staff_id,t=this.calendars_data.find(function(t){return t.id==e}).services;return this.services_data.filter(function(e){return-1!==t.indexOf(e.id)})}return this.services_data},getShortCode:function(){var e='wap_widget title="'+this.titleGiven+'"';return e+=this.large?" large ":"",e+=this.open?" open ":"",e+=this.popup?" popup ":"",e+=this.close_cross?" close_cross ":"",e+=this.center?" center ":"",e+=this.week?" week ":"",e+=this.staffpage?" staff_page ":"",e+=this.random?" random ":"",e+=this.active_staff_id?' staff="'+this.active_staff_id+'" ':"",e="["+(e+=this.active_service_id?' service="'+this.active_service_id+'" ':"")+"]",this.$emit("change",e,{largeVersion:this.large,autoOpen:this.open,popup:this.popup,close_cross:this.close_cross,week:this.week,center:this.center,staffPage:this.staffpage,random:this.random,buttonTitle:this.titleGiven}),e},previewSCimg:function(){var e="widget_"+(this.open?"cal_":"")+(this.large?"lg":this.center?"sm-c":"sm")+".svg";return window.apiWappointment.resourcesUrl+"images/"+e}}},l=(n("xX18"),n("KHd+")),d=Object(l.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"d-flex align-items-center justify-content-between"},[n("div",{staticClass:"commands-div"},[n("div",{attrs:{"data-tt":"Booking button's title"}},[n("label",[n("InputPh",{attrs:{ph:e.get_i18n("bwe_widget_button_title","common")},model:{value:e.titleGiven,callback:function(t){e.titleGiven=t},expression:"titleGiven"}})],1)]),e._v(" "),n("div",{attrs:{"data-tt":e.get_i18n("bwe_widget_ck_fs_popup_tip","common")}},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.popup,expression:"popup"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.popup)?e._i(e.popup,null)>-1:e.popup},on:{change:function(t){var n=e.popup,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=e._i(n,null);a.checked?i<0&&(e.popup=n.concat([null])):i>-1&&(e.popup=n.slice(0,i).concat(n.slice(i+1)))}else e.popup=s}}}),e._v(" "+e._s(e.get_i18n("bwe_widget_ck_fs_popup","common")))])]),e._v(" "),e.popup?n("div",{staticClass:"ml-2"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.close_cross,expression:"close_cross"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.close_cross)?e._i(e.close_cross,null)>-1:e.close_cross},on:{change:function(t){var n=e.close_cross,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=e._i(n,null);a.checked?i<0&&(e.close_cross=n.concat([null])):i>-1&&(e.close_cross=n.slice(0,i).concat(n.slice(i+1)))}else e.close_cross=s}}}),e._v(" "+e._s(e.get_i18n("bwe_widget_ck_fs_popup_closes","common")))])]):e._e(),e._v(" "),n("div",{attrs:{"data-tt":"Center the widget within the container"}},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.center,expression:"center"}],attrs:{type:"checkbox",disabled:e.popup},domProps:{checked:Array.isArray(e.center)?e._i(e.center,null)>-1:e.center},on:{change:function(t){var n=e.center,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=e._i(n,null);a.checked?i<0&&(e.center=n.concat([null])):i>-1&&(e.center=n.slice(0,i).concat(n.slice(i+1)))}else e.center=s}}}),e._v(" "+e._s(e.get_i18n("bwe_widget_ck_center","common")))])]),e._v(" "),n("div",{attrs:{"data-tt":"Opens the calendar's step automatically"}},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.open,expression:"open"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.open)?e._i(e.open,null)>-1:e.open},on:{change:function(t){var n=e.open,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=e._i(n,null);a.checked?i<0&&(e.open=n.concat([null])):i>-1&&(e.open=n.slice(0,i).concat(n.slice(i+1)))}else e.open=s}}}),e._v(" "+e._s(e.get_i18n("bwe_widget_ck_open","common")))])]),e._v(" "),n("div",{attrs:{"data-tt":"Calendar will expand to the container's width"}},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.large,expression:"large"}],attrs:{type:"checkbox",disabled:e.popup},domProps:{checked:Array.isArray(e.large)?e._i(e.large,null)>-1:e.large},on:{change:function(t){var n=e.large,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=e._i(n,null);a.checked?i<0&&(e.large=n.concat([null])):i>-1&&(e.large=n.slice(0,i).concat(n.slice(i+1)))}else e.large=s}}}),e._v(" "+e._s(e.get_i18n("bwe_widget_ck_full","common")))])]),e._v(" "),n("div",{attrs:{"data-tt":"Show a week view instead of the full month"}},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.week,expression:"week"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.week)?e._i(e.week,null)>-1:e.week},on:{change:function(t){var n=e.week,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=e._i(n,null);a.checked?i<0&&(e.week=n.concat([null])):i>-1&&(e.week=n.slice(0,i).concat(n.slice(i+1)))}else e.week=s}}}),e._v(" "+e._s(e.get_i18n("bwe_widget_ck_week","common")))])]),e._v(" "),n("div",{attrs:{"data-tt":"The first screen in your booking form will be a staff selection page(if you have more than one staff)"}},[n("label",{class:{"text-muted":e.staffSelected}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.staffpage,expression:"staffpage"}],attrs:{disabled:e.staffSelected,type:"checkbox"},domProps:{checked:Array.isArray(e.staffpage)?e._i(e.staffpage,null)>-1:e.staffpage},on:{change:function(t){var n=e.staffpage,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=e._i(n,null);a.checked?i<0&&(e.staffpage=n.concat([null])):i>-1&&(e.staffpage=n.slice(0,i).concat(n.slice(i+1)))}else e.staffpage=s}}}),e._v(" "+e._s(e.get_i18n("bwe_widget_ck_staff","common")))])]),e._v(" "),n("div",{attrs:{"data-tt":"Random selection of the staff"}},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.random,expression:"random"}],attrs:{type:"checkbox",disabled:e.staffpage},domProps:{checked:Array.isArray(e.random)?e._i(e.random,null)>-1:e.random},on:{change:function(t){var n=e.random,a=t.target,s=!!a.checked;if(Array.isArray(n)){var i=e._i(n,null);a.checked?i<0&&(e.random=n.concat([null])):i>-1&&(e.random=n.slice(0,i).concat(n.slice(i+1)))}else e.random=s}}}),e._v(" "+e._s(e.get_i18n("bwe_widget_ck_random","common")))])]),e._v(" "),e.simple?e._e():[e.filteredCalendars?n("div",[n("SearchDropdown",{attrs:{ph:"Lock Calendar/Staff",elements:e.filteredCalendars,labelSearchKey:"name"},model:{value:e.active_staff_id,callback:function(t){e.active_staff_id=t},expression:"active_staff_id"}})],1):e._e(),e._v(" "),e.filteredServices?n("div",{staticClass:"mt-2"},[n("SearchDropdown",{attrs:{ph:"Lock Service",elements:e.filteredServices,labelSearchKey:"name"},model:{value:e.active_service_id,callback:function(t){e.active_service_id=t},expression:"active_service_id"}})],1):e._e()]],2),e._v(" "),e.preview?n("div",[n("img",{staticClass:"img-fluid",attrs:{src:e.previewSCimg,alt:"preview booking button shape",width:"100"}})]):e._e(),e._v(" "),n("span",{staticStyle:{display:"none"}},[e._v(e._s(e.getShortCode))])])},[],!1,null,null,null);t.a=d.exports},Rhu5:function(e,t,n){"use strict";var a=n("KtV/");n.n(a).a},"S/cw":function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.bullet-title{\n    color: #777;\n    border-bottom: 1px solid #c2c1cc;\n    font-weight: bold;\n}\n.bullet-wap{\n    border: 1px solid var(--primary);\n    padding: .35rem;\n    border-radius: 1.2rem;\n    height: 2rem;\n    width: 2rem;\n    display: inline-block;\n    text-align: center;\n    font-size: 1rem;\n    color: var(--primary);\n    margin-right: .5rem;\n    background-color: #fff;\n}\n.changename .label-wrapper{\n    margin-bottom: 0 !important;\n}\n.account-selector{\n    width: 380px;\n}\n.cal-edit-margin{\n    margin-left: 48px;\n}\n.mr-6{\n    margin-right: 3rem !important;\n}\n",""])},SIU3:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.slot {\n    border-radius: .3rem;\n    font-size: 13px;\n}\n.slot img{\n  max-height: 20px;\n}\n.wservices-list {\n    background-color: #f0f0f0;\n    border-radius: .6em;\n    padding: 1rem;\n    width:300px;\n}\n.wservices-list .label-title{\n    width:116px;\n    font-size: .9rem;\n}\n.wservices-list .slot {\n    margin-bottom: .9em;\n    color: #535353;\n}\n.wservices-list .slot.disabled {\n    color: #b9b2b2;\n}\n\n",""])},aiNY:function(e,t,n){"use strict";var a=n("6ANM");n.n(a).a},djb6:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.cal-icon .card{\n  max-width: none;\n  width: 640px;\n}\n.wappointment-wrap p.vsmall{\n  font-size:.8rem;\n}\n.unclickable{\n  cursor:default !important;\n}\n.data-item{\n  border: 1px solid #d9d9d9;\n  border-radius: .25rem;\n  padding: .2rem;\n  background-color: #f0f0f0;\n}\n",""])},dqqa:function(e,t,n){"use strict";var a=n("BEd2");n.n(a).a},gpnA:function(e,t,n){"use strict";var a=n("kcCh");n.n(a).a},kcCh:function(e,t,n){var a=n("SIU3");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("78e9e3b6",a,!0,{})},kjyX:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.wrapper-dotcom{\n  border-radius: .4rem;\n  max-width: 850px;\n  margin: 0 auto;\n}\n.create-account {\n\tbackground: #d6d5ff;\n\tpadding: .8em;\n\tborder-radius: .4em;\n\tmin-width: 380px;\n  max-width: 480px;\n}\n",""])},qhsB:function(e,t,n){var a=n("kjyX");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);(0,n("SZ7m").default)("698091fd",a,!0,{})},rqdy:function(e,t,n){"use strict";var a=n("LB0/"),s=n("vbJd"),i=n("l9VS"),r=n("XfSa"),o=n("VyXW"),c=n("FYyN"),l=n("c+oO"),d=n("A5Wa");function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(s,i){try{var r=t[s](i),o=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}("next")})}}var v,f,h={extends:r.a,components:window.wappointmentExtends.filter("RegavComponents",{RegularAvailability:a.a,TimeZones:i.a,StaffSelector:s.a,StaffPicture:o.a},{RequestMaker:c.a}),props:{calendar:{type:Object,default:!1},timezones_list:{type:Object},staffs:{type:Array},services:{type:Array},calendarsUsed:{type:Array}},data:function(){return{calendarSelected:!1,requireSave:!1,hasWpuid:!1}},created:function(){this.calendarSelected=Object.assign({},this.calendar),void 0!==this.calendarSelected.wp_uid&&this.calendarSelected.wp_uid>0&&(this.hasWpuid=this.calendarSelected.wp_uid),this.mainService=this.$vueService(new l.a),""==this.calendarSelected.timezone&&(this.calendarSelected.timezone=d.a.tz.guess())},watch:{calendarSelected:{handler:function(e,t){!1!==t&&(this.requireSave=!0,this.hasWpuid=e.wp_uid)},deep:!0}},computed:{onlyUnusedStaff:function(){var e=this.calendarSelected.wp_uid,t=this.calendarsUsed.filter(function(t){return t!=e});return[].concat(this.staffs).map(function(e){return-1===t.indexOf(e.ID)?e.used=0:void 0===e.used?e.used=1:e.used++,e})},getRegav:function(){var e=Object.assign({},this.calendar.regav);return void 0===this.calendar.regav.precise&&(e=this.convertRegavToPrecise(e)),e},staffSelected:function(){return!1!==this.calendarSelected&&this.hasWpuid>0}},methods:{convertRegavToPrecise:function(e){for(var t in this.calendar.regav)if(this.calendar.regav.hasOwnProperty(t))for(var n=0;n<this.calendar.regav[t].length;n++){var a=this.calendar.regav[t][n];e[t][n]=[60*a[0],60*a[1]]}return e},updatedRA:function(e){e.precise=!0,this.calendarSelected.regav=e},changedABD:function(e){this.calendarSelected.avb=e},saveCalendar:function(){this.request(this.saveCalendarRequest,this.calendarSelected,void 0,!1,this.calendarSaved)},saveCalendarRequest:(f=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("save",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)}),calendarSaved:function(e){this.serviceSuccess(e),this.$emit("saved",e)},changedPicture:function(e){e>0?this.request(this.getAvatarRequest,{id:e},void 0,!1,this.avatarLoaded):(this.calendarSelected.avatar="",this.calendarSelected.avatar_id="")},avatarLoaded:function(e){this.calendarSelected.avatar_id=e.data.id,this.calendarSelected.avatar=e.data.avatar},getAvatarRequest:(v=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mainService.call("getAvatar",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(e){return v.apply(this,arguments)}),updateTimezone:function(e){this.calendarSelected.timezone=e},updateStaffName:function(e){this.calendarSelected.name=e},updateStaff:function(e){this.calendarSelected.wp_uid!=e.ID&&(this.calendarSelected.wp_uid=e.ID,this.calendarSelected.gravatar=e.gravatar,this.calendarSelected.name=""!==e.display_name?e.display_name:"Jane Doe")}}},p=(n("aiNY"),n("KHd+")),m=Object(p.a)(h,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("div",[n("p",{staticClass:"h6 text-muted"},[n("span",{staticClass:"bullet-wap"},[e._v("1")]),e._v(" "),n("span",{staticClass:"bullet-title"},[e._v(e._s(e.get_i18n("regav_step1","common")))])]),e._v(" "),n("small",{staticClass:"text-muted mr-6"},[e._v(e._s(e.get_i18n("regav_select_an","common")))]),e._v(" "),n("div",{staticClass:"d-flex align-items-top mb-2"},[""!=e.calendarSelected.name?n("StaffPicture",{attrs:{src:e.calendarSelected.avatar,gravatar:e.calendarSelected.gravatar},on:{changed:e.changedPicture}}):e._e(),e._v(" "),""!=e.calendarSelected.name?n("div",{staticClass:"mr-2 changename"},[n("InputPh",{attrs:{ph:e.get_i18n("name","common")},on:{updatedValue:e.updateStaffName},model:{value:e.calendarSelected.name,callback:function(t){e.$set(e.calendarSelected,"name",t)},expression:"calendarSelected.name"}})],1):e._e(),e._v(" "),n("div",{staticClass:"account-selector"},[n("StaffSelector",{attrs:{staffs:e.onlyUnusedStaff,activeStaffId:e.calendarSelected.wp_uid},on:{updateStaff:e.updateStaff}})],1)],1)]),e._v(" "),e.staffSelected?n("div",[n("p",{staticClass:"h6 text-muted"},[n("span",{staticClass:"bullet-wap"},[e._v("2")]),e._v(" "),n("span",{staticClass:"bullet-title"},[e._v(" "+e._s(e.get_i18n("regav_step2","common")))])]),e._v(" "),n("div",{staticClass:"cal-edit-margin"},[n("TimeZones",{attrs:{classW:"d-flex",timezones:e.timezones_list,defaultTimezone:e.calendarSelected.timezone,typeClass:"small text-muted container-values d-flex justify-content-between align-items-center form-control"},on:{updateTimezone:e.updateTimezone}})],1),e._v(" "),n("hr")]):e._e(),e._v(" "),e.staffSelected?n("div",[n("p",{staticClass:"h6 text-muted"},[n("span",{staticClass:"bullet-wap"},[e._v("3")]),e._v(" "),n("span",{staticClass:"bullet-title"},[e._v(" "+e._s(e.get_i18n("regav_step3","common")))])]),e._v(" "),n("div",{staticClass:"cal-edit-margin"},[n("RegularAvailability",{attrs:{initValue:e.getRegav,viewData:e.calendarSelected,services:e.services},on:{updatedDays:e.updatedRA,changedABD:e.changedABD}})],1)]):e._e()]),e._v(" "),e.requireSave?n("div",{staticClass:"save-floating-button"},[n("button",{staticClass:"btn btn-primary",on:{click:e.saveCalendar}},[e._v(e._s(e.get_i18n("regav_save","common")))])]):e._e()])},[],!1,null,null,null);t.a=m.exports},uChi:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n#shortcode_block{\n    border: 2px solid var(--primary);\n    border-radius: .3rem;\n    padding: 1rem;\n    text-align: center;\n}\n#shortcode_block p{\n    font-size: 1.4rem;\n}\n.shortcode-editor{\n    max-width:600px;\n}\n.shortcode-gen{\n    background-color: #f5f5f5;\n    padding: .5em;\n    border-radius: .4em;\n}\n\n",""])},wvDB:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,"\n.save-floating-button.button-absolute{\n    position: absolute;\n}\n",""])},xX18:function(e,t,n){"use strict";var a=n("LFG5");n.n(a).a}}]);